# 文章管理

​	文章管理模块开发和用户类似，后台接口已构建完成，开发前端页面调试即可







​	字段调整：新增status字段（文章状态：0-暂存；1-发布）



### 列表查询

> 前后端交互格式

```json
{
    "code": 0,
    "data": {
        "records": [
            {
                "id": "1781721334301069315",
                "title": "11rwr",
                "content": "11rwerw",
                "thumbNum": 5,
                "favourNum": 0,
                "userId": "1781721334301069314",
                "createTime": "2024-04-21T09:36:14.000+00:00",
                "updateTime": "2024-04-21T10:21:03.000+00:00",
                "tagList": [
                    "java",
                    "php",
                    "ant design pro"
                ],
                "user": {
                    "id": "1781721334301069314",
                    "userAccount": "noob",
                    "userName": "noob",
                    "userAvatar": "http://cos.holic-x.com/profile/avatar/avatar02.png",
                    "userProfile": null,
                    "userRole": "admin",
                    "userStatus": 1,
                    "createTime": "2024-04-20T16:27:23.000+00:00",
                    "updateTime": "2024-04-21T08:37:59.000+00:00"
                },
                "hasThumb": false,
                "hasFavour": false,
                "status": 1
            }
        ],
        "total": "3",
        "size": "20",
        "current": "1",
        "orders": [],
        "optimizeCountSql": true,
        "searchCount": true,
        "countId": null,
        "maxLimit": null,
        "pages": "1"
    },
    "message": "ok"
}
```



​	此处需注意一个点，就是前后端响应数据处理的对照，例如后端返回的VO（对应table的属性），在执行新增、修改操作的时候可能VO中的属性（例如post返回的是一个tagList）而对应model的tags（一个字符串格式），因此需要借助组件进行渲染，或者尽量保持字段一致，如果要加以区分可以考虑多传一个字段补充

​	例如传入tags（原始字符串格式）、tagList（列表），对照前端的处理可以将tagList以标签列表的方式进行展示（可以设置隐藏部分字段），而针对修改表单操作的时候则可使用tags进行操作。如果说字段不匹配，**前端可以做转化也可**



​	例如后端给的是tagList：`["java","php","python","ant design pro"]`，而新增、修改的时候需要传入的是tags，则设定传入值即可（需注意**格式处理**）

```tsx
	  // 添加操作
      await addPostUsingPost({
        tags: fields.tagList,
        ...fields,
      });


	// 查询操作等
	const res = await listPostVoByPageUsingPost({
            tags: params.tagList,
            ...params
          })
    
    // 或者调整后端接收参数定义，将tags调整为tagList
    public class PostUpdateRequest implements Serializable {
    /**
     * 标签列表
     */
    private List<String> tagList;
}
```

> PorTable 对于List标签的渲染

```tsx
{
      title: '标签列表',
      dataIndex: 'tagList',
      valueType: 'select', // 列表形式["java","php","ant design pro"]
      // 渲染表单项
      renderFormItem: () => {
        return (
          <Select
            mode={'multiple'}
            // onChange={() => onSelectChange(row)}
            // onClick={() => showSalespersonModal(row)}
            options={[{ label: 'java', value: 'java' },{ label: 'php', value: 'php' },{ label: 'python', value: 'python' }]}
          />
        );
      },
```

> PorTable 对于实体的渲染（例如获取创建人姓名，后端将整个user返回）

```tsx
	{
      title: '创建者',
      // dataIndex: 'userId',
      dataIndex: 'user',
      renderText: (val) => `${val.userName}` ,
      valueType: 'text',
      hideInForm: true,
    },
```



